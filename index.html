<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Budget Calculator</title>
	<style>
		body{
			font-family: Arial, sans-serif;
			background-color: #f4f4f4;
			margin: 0;
			padding: 20px;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		
		h1{
			color: #333;
		}
		
		.container{
			background: white;
			border-radius: 8px;
			box-shadow: 0 2px  10px rgba(0, 0, 0, 0.1);
			padding: 20px;
			width: 400px;
			margin-bottom: 20px;
		}
		
		input[type="number"],
		input[type="text"]{
			width: calc(100% - 10px);
			padding: 10px;
			margin:10px 0;
			border: 1px solid #ddd;
			border-radius: 4px;
			font-size: 16px;
		}
		
		button{
			width: 100%;
			padding: 10px;
			background-color: #5cb85c;
			border: none;
			border-radius: 4px;
			color: white;
			font-size: 16px;
			cursor: pointer;
		}
		
		button: hover{
			background-color: #4cae4c;
		}
		
		
		table{
			width: 600px;
			border-collapse: collapse;
			margin-top: 20px;
			font-size:18px;
		}
		th, td{
			border-bottom: 1px solid #ddd;
			padding: 15px;
			text-align: left;
		}
		th{
			background-color: #f2f2f2;
			font-weight: bold;
		}
		
		.table-container{
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		
		@media (max-width: 600px){
			.container{
				width: 90%;
			}
			
			table {
				width: 100%;
			}
		}
	</style>
</head>

<body>
	<h1>Budget Calculator</h1>
	<div class="container">
		<label for="salary">Enter your monthly salary:</label>
		<input type="number" id="salary" required>
		<label for="annual_contribution">Enter annual contribution:(optional)</label>
		<input type="number" id="annual_contribution" value="0">
		<button onclick="calculateBudget()">Calculate</button>
	</div>
	
	<div class="table-container">
		<h2>Budget Allocation</h2>
		<table id="budget-table">
			<tr>
				<th>Category</th>
				<th>Amount</th>
			</tr>
		</table>
	
		<h2>Investment Growth</h2>
		<table id="growth-table">
			<tr>
				<th>Years</th>
				<th>Future Value</th>
			</tr>
		</table>
	</div>
	
	<script>
		async function calculateBudget(){
			const salary = document.getElementById('salary').value;
			const annualContribution = document.getElementById('annual_contribution').value || 0;
			const response = await fetch('/calculate',{
				method: 'POST',
				headers: {
					'Content-Type':	'application/json'
				},
				body: JSON.stringify({salary, annualContribution})
			});
			const data = await response.json();
			
			const budgetTable = document.getElementById('budget-table');
			budgetTable.innerHTML = '<tr><th>Category</th><th>Amount</th></tr>';
			for(const [category, amount] of Object.entries(data.budget)){
				const row = budgetTable.insertRow();
				row.insertCell(0).innerText = category;
				row.insertCell(1).innerText = amount.toFixed(2);
			}
			
			const growthTable = document.getElementById('growth-table');
			growthTable.innerHTML = '<tr><th>Years</th><th>Future Value</th></tr>';
			for(const [years, futureValue] of Object.entries(data.investment_growth)){
				const row = growthTable.insertRow();
				row.insertCell(0).innerText = years;
				row.insertCell(1).innerText = futureValue.toFixed(2);
			}
		}
	</script>
</body>